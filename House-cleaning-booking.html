<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="true">
    <meta name="format-detection" content="telephone=no">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css" />
    <title>Book A House Cleaning Now</title>
    <link rel="stylesheet" type="text/css" href="style.css" />
</head>
<body>
    <div class="topnav">
  <div class="logo">
    <a href="index.html">
      <img src="cleaning.png" alt="Logo" height="40">
    </a>
  </div>

  <!-- Бургер-кнопка (видна только на мобильных) -->
  <button class="burger" onclick="toggleMenu()">
    <i class="fas fa-bars"></i>
  </button>

  <!-- Меню ссылок -->
  <div class="menu">
    <a href="index.html">Home</a>
    <a href="Projects.html">Projects</a>
    <a href="Our Services.html">Our Services</a>
    <a href="Contact Us.html">Contact Us</a>
    <a href="About Us.html">About Us</a>
  </div>
    <div class="banner">
        <div class="banner-content">
            <h1 class="web_title _anim-items _anim-no-hide">We'd love to hear from you!</h1>
        </div>
    </div>
<div class = "whyus-header">
    <div class="quiz-box" id="quiz"></div>
    <button id="next">Next</button>
    <button id="submit" style="display:none;">Submit</button>
    <button href="index.html" id="home" style="display:none;">Go back to the home page</button>  
</div>
<footer class="footer">
  <div class="footer-column">
    <h2><i class="fas fa-broom"></i> Cleaning Company</h2>
    <p>Reliable & professional cleaning services for homes and businesses. Your space, our mission.</p>
    <div class="social-icons">
      <a href="#"><i class="fab fa-facebook-f"></i></a>
      <a href="#"><i class="fab fa-twitter"></i></a>
      <a href="#"><i class="fab fa-linkedin-in"></i></a>
      <a href="#"><i class="fab fa-instagram"></i></a>
    </div>
  </div>

  <div class="footer-column">
    <h3>Pages</h3>
    <a href="index.html">Home Page</a>
    <a href="About Us.html">About Us</a>
    <a href="Projects.html">Our Projects</a>
    <a href="Our Services.html">Our Services</a>
    <a href="Contact Us.html">Contact Us</a>
    <a href="FAQ.html">FAQ Page</a>
    <a href="private-policy.html">Privacy Policy</a>
  </div>

  <div class="footer-column contact-info">
    <div class="contact-info">
      <h3>Get in Touch</h3>
    
      <div class="contact-item">
        <i class="fas fa-map-marker-alt"></i> Co. Dublin, Ireland
      </div>
    
      <div class="contact-item">
        <i class="fas fa-phone-alt"></i> 0852014429
      </div>
    
      <div class="contact-item">
        <i class="fas fa-envelope"></i> info@cleaning.com
      </div>
    
      <div class="contact-item">
        <i class="fas fa-globe"></i> www.cleaning.ie
      </div>
    </div>
</footer>    
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyBuOPXb-9caqRfAzQStgNulnJ_9vkJsZV8",
  authDomain: "cleaning-website-70808.firebaseapp.com",
  projectId: "cleaning-website-70808",
  storageBucket: "cleaning-website-70808.appspot.com",
  messagingSenderId: "548948017624",
  appId: "1:548948017624:web:863df816c9d8840df572ad",
  measurementId: "G-WBW3MSG46S"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const quizData = [
  {
    question: "What type of property is this for? This question is required.*",
    a: "Flat",
    b: "Apartment",
    c: "House",
    d: "Commercial Building",
    id: "house-type"
  },
  {
    question: "How often do you need the service?",
    a: "One-time Cleaning",
    b: "Weekly Cleaning",
    c: "Bi-weekly Cleaning",
    d: "Monthly Cleaning",
    id: "often-cleaning"
  },
  {
    question: "What type of cleaning would you like?",
    a: "Deep Cleaning",
    b: "Standard Cleaning",
    c: "Move-in/Move-out Cleaning",
    id: "type-cleaning"
  },
  {
    question: "How many bedrooms do you have?",
    a: "1 Bedroom",
    b: "2 Bedrooms",
    c: "3 Bedrooms",
    d: "4 Bedrooms",
    e: "5 Bedrooms",
    f: "6 or more bedrooms",
    id: "quantity-of-bedrooms"
  },
  {
    question: "How many bathrooms do you have?",
    a: "1 Bathroom",
    b: "2 Bathrooms",
    c: "3 Bathrooms",
    d: "4 Bathrooms",
    id: "quantity-of-bathrooms"
  },
  {
    question: "How many extra reception room(s) need cleaning? (e.g. lounge, dining room, conservatory, playroom, office, converted attic, etc...) This question is required.*",
    a: "0",
    b: "1",
    c: "2",
    d: "3",
    e: "4+",
    f: "Other",
    id: "quantity-of-reception-rooms"
  },
  {
    question: "Which additional Services do you need? This question is required.*",
    a: "No additional services",
    b: "Carpet Cleaning",
    c: "Upholstery Cleaning",
    d: "Inside Window Cleaning",
    e: "Oven Cleaning",
    f: "Fridge Cleaning",
    g: "Door Cleaning",
    h: "Wardrobe Cleaning",
    i: "Venetian Blind Cleaning",
    j: "Cleaning kitchen presses (must be empty)",
    id: "quantity-of-extra-rooms"
  },
    {
    question: "Do you need to clean windows outside?",
    a: "Yes",
    b: "No",
    id: "outside-windows-cleaning"
  },
  {
    question: "When do you want the cleaning done?",
    a: "As soon as possible",
    b: "Within next few days",
    c: "Within the next week",
    d: "Within the next month",
    id: "time-of-cleaning"
  },
  {
    question: "What email address would you like the quote sent to? This question is required.*",
    input: "email",
    id: "email"
  },
  {
    question: "Can we have your contact number?",
    input: "tel",
    id: "phone"
  },
  {
    question: "Can we have your name for contact?",
    input: "text",
    id: "name"
  },
];

const quiz = document.getElementById('quiz');
const nextButton = document.getElementById('next');
const submitButton = document.getElementById('submit');
const homeButton = document.getElementById('home');

let currentQuiz = 0;
let answers = {};

function loadQuiz() {
  quiz.innerHTML = '';
  const current = quizData[currentQuiz];

  const qEl = document.createElement('div');
  qEl.classList.add('question');
  qEl.innerText = current.question;
  quiz.appendChild(qEl);

  if (current.input) {
    const input = document.createElement('input');
    input.type = current.input;
    input.id = current.id;
    input.value = answers[current.id] || '';
    quiz.appendChild(input);
  } else {
    ['a','b','c','d','e','f','g','h','i','j'].forEach(key => {
      if (current[key]) {
        const label = document.createElement('label');
        const input = document.createElement('input');
        input.type = current.id === "quantity-of-extra-rooms" ? 'checkbox' : 'radio';
        input.name = current.id;
        input.value = current[key];

        if (current.id === "quantity-of-extra-rooms") {
          if (Array.isArray(answers[current.id]) && answers[current.id].includes(current[key])) {
            input.checked = true;
          }
        } else {
          if (answers[current.id] === current[key]) {
            input.checked = true;
          }
        }

        label.appendChild(input);
        label.appendChild(document.createTextNode(current[key]));
        quiz.appendChild(label);
      }
    });
  }

  nextButton.style.display = currentQuiz < quizData.length - 1 ? 'inline' : 'none';
  submitButton.style.display = currentQuiz === quizData.length - 1 ? 'inline' : 'none';
}

function validateAndStoreCurrentAnswer() {
  const current = quizData[currentQuiz];

  if (current.input) {
    const input = document.getElementById(current.id);
    const value = input.value.trim();
    if (!value) {
      alert("Please fill out this field.");
      return false;
    }
    if (current.input === "email" && !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value)) {
      alert("Please enter a valid email.");
      return false;
    }
    if (current.input === "tel" && !/^[\d\s()+-]{7,20}$/.test(value)) {
      alert("Please enter a valid phone number.");
      return false;
    }
    answers[current.id] = value;
  } else {
    if (current.id === "quantity-of-extra-rooms") {
      const selected = Array.from(document.querySelectorAll(`input[name="${current.id}"]:checked`)).map(cb => cb.value);
      if (selected.length === 0) {
        alert("Please select at least one additional service.");
        return false;
      }
      answers[current.id] = selected;
    } else {
      const selected = document.querySelector(`input[name="${current.id}"]:checked`);
      if (!selected) {
        alert("Please select an option.");
        return false;
      }
      answers[current.id] = selected.value;
    }
  }

  return true;
}

nextButton.addEventListener('click', () => {
  if (!validateAndStoreCurrentAnswer()) return;
  currentQuiz++;
  loadQuiz();
});

submitButton.addEventListener('click', async () => {
  if (!validateAndStoreCurrentAnswer()) return;

  try {
    await addDoc(collection(db, "House-cleaning-bookings"), {
      quizAnswers: answers,
      createdAt: new Date()
    });
    quiz.innerHTML = "<h2>Thank you! We will reply as soon as possible.</h2>";
    submitButton.style.display = 'none';
    homeButton.style.display = 'inline';
  } catch (error) {
    console.error("Error saving to Firebase:", error);
    alert("There was an error submitting your answers. Try again.");
  }
});

homeButton.addEventListener('click', () => {
  window.location.href = "index.html";
});

loadQuiz();
</script>
<script>
  function toggleMenu() {
    const menu = document.querySelector('.menu');
    menu.classList.toggle('active');
  }
</script>
<script type="module" src="script.js"></script>
</body>
</html>
